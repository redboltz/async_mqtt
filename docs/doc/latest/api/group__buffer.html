<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>async_mqtt: Reference counting immutable buffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">async_mqtt<span id="projectnumber">&#160;9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__buffer.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Reference counting immutable buffer<div class="ingroups"><a class="el" href="group__packet.html">MQTT packets</a> &raquo; <a class="el" href="group__packet__detail.html">implementation class</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Reference counting immutable buffer:</div>
<div class="dyncontent">
<div class="center"><img src="group__buffer.png" border="0" usemap="#agroup____buffer" alt=""/></div>
<map name="agroup____buffer" id="agroup____buffer">
<area shape="rect" title=" " alt="" coords="216,5,363,50"/>
<area shape="rect" href="group__packet__detail.html" title=" " alt="" coords="5,14,168,42"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasync__mqtt_1_1buffer.html">async_mqtt::buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer that has string_view interface and shared ownership This class is only for advanced usecase such as developping high performance MQTT broker. Typical MQTT client developpers don't need to care about the buffer. This class provides string_view interface. This class holds string_view pointee's lifetime optionally.  <a href="classasync__mqtt_1_1buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstd_1_1hash_3_01async__mqtt_1_1buffer_01_4.html">std::hash&lt; async_mqtt::buffer &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">class template hash specilization for the buffer  <a href="classstd_1_1hash_3_01async__mqtt_1_1buffer_01_4.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafccb94aa6be5a8e224e1b900e9522b4f" id="r_gafccb94aa6be5a8e224e1b900e9522b4f"><td class="memItemLeft" align="right" valign="top">const_buffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafccb94aa6be5a8e224e1b900e9522b4f">boost::asio::buffer</a> (<a class="el" href="classasync__mqtt_1_1buffer.html">async_mqtt::buffer</a> const &amp;data)</td></tr>
<tr class="memdesc:gafccb94aa6be5a8e224e1b900e9522b4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">create boost::asio::const_buffer from the <a class="el" href="classasync__mqtt_1_1buffer.html" title="buffer that has string_view interface and shared ownership This class is only for advanced usecase su...">async_mqtt::buffer</a> boost::asio::const_buffer is a kind of view class. So the class doesn't hold any lifetimes. The caller needs to manage data's lifetime.  <br /></td></tr>
<tr class="separator:gafccb94aa6be5a8e224e1b900e9522b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c78376365b748051fe7385678fb6f68" id="r_ga4c78376365b748051fe7385678fb6f68"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; char[]&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4c78376365b748051fe7385678fb6f68">async_mqtt::make_shared_ptr_char_array</a> (std::size_t size)</td></tr>
<tr class="memdesc:ga4c78376365b748051fe7385678fb6f68"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared_ptr&lt;char[]&gt; creating function. You can choose the target type.  <br /></td></tr>
<tr class="separator:ga4c78376365b748051fe7385678fb6f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fd86cf55e3842b607702b72c0617159" id="r_ga3fd86cf55e3842b607702b72c0617159"><td class="memTemplParams" colspan="2">template&lt;typename Alloc &gt; </td></tr>
<tr class="memitem:ga3fd86cf55e3842b607702b72c0617159"><td class="memTemplItemLeft" align="right" valign="top">std::shared_ptr&lt; char[]&gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ga3fd86cf55e3842b607702b72c0617159">async_mqtt::allocate_shared_ptr_char_array</a> (Alloc &amp;&amp;alloc, std::size_t size)</td></tr>
<tr class="memdesc:ga3fd86cf55e3842b607702b72c0617159"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared_ptr&lt;char[]&gt; creating function with allocator. You can choose the target type.  <br /></td></tr>
<tr class="separator:ga3fd86cf55e3842b607702b72c0617159"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3fd86cf55e3842b607702b72c0617159" name="ga3fd86cf55e3842b607702b72c0617159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fd86cf55e3842b607702b72c0617159">&#9670;&#160;</a></span>allocate_shared_ptr_char_array()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Alloc &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; char[]&gt; async_mqtt::allocate_shared_ptr_char_array </td>
          <td>(</td>
          <td class="paramtype">Alloc &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>alloc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>shared_ptr&lt;char[]&gt; creating function with allocator. You can choose the target type. </p>
<ul>
<li>if your compiler setting is C++20 or later, then <code>std::make_shared&lt;char[]&gt;(size)</code> is used.<ul>
<li>It can allocate an array of characters and the control block in a single allocation.</li>
</ul>
</li>
<li>otherwise <code>std::shared_ptr&lt;char[]&gt;(new char[size])</code> is used.<ul>
<li>It requires two times allocations. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>allocator </td></tr>
    <tr><td class="paramname">size</td><td>of char array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>shared_ptr of array </dd></dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
<a id="gafccb94aa6be5a8e224e1b900e9522b4f" name="gafccb94aa6be5a8e224e1b900e9522b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafccb94aa6be5a8e224e1b900e9522b4f">&#9670;&#160;</a></span>buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const_buffer boost::asio::buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasync__mqtt_1_1buffer.html">async_mqtt::buffer</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>create boost::asio::const_buffer from the <a class="el" href="classasync__mqtt_1_1buffer.html" title="buffer that has string_view interface and shared ownership This class is only for advanced usecase su...">async_mqtt::buffer</a> boost::asio::const_buffer is a kind of view class. So the class doesn't hold any lifetimes. The caller needs to manage data's lifetime. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>source <a class="el" href="classasync__mqtt_1_1buffer.html" title="buffer that has string_view interface and shared ownership This class is only for advanced usecase su...">async_mqtt::buffer</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boost::asio::const_buffer</dd></dl>
<h4><a class="anchor" id="autotoc_md396"></a>
Requirements</h4>
<ul>
<li>Header: <a class="el" href="buffer_8hpp_source.html">async_mqtt/util/buffer.hpp</a></li>
<li>Convenience header: <a class="el" href="all_8hpp_source.html">async_mqtt/all.hpp</a> </li>
</ul>

</div>
</div>
<a id="ga4c78376365b748051fe7385678fb6f68" name="ga4c78376365b748051fe7385678fb6f68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c78376365b748051fe7385678fb6f68">&#9670;&#160;</a></span>make_shared_ptr_char_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; char[]&gt; async_mqtt::make_shared_ptr_char_array </td>
          <td>(</td>
          <td class="paramtype">std::size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>shared_ptr&lt;char[]&gt; creating function. You can choose the target type. </p>
<ul>
<li>if your compiler setting is C++20 or later, then <code>std::make_shared&lt;char[]&gt;(size)</code> is used.<ul>
<li>It can allocate an array of characters and the control block in a single allocation.</li>
</ul>
</li>
<li>otherwise <code>std::shared_ptr&lt;char[]&gt;(new char[size])</code> is used.<ul>
<li>It requires two times allocations. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>of char array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>shared_ptr of array </dd></dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
